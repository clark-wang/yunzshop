{template 'web/_header'}
<div class="w1200 m0a">
    {template 'tabs'}
    
    <div class="rightlist">
        <!-- 新增加右侧顶部三级菜单结束 -->
        <div class="panel panel-info">
            <div class="panel-heading">筛选</div>
            <div class="panel-body">
                <form action="./index.php" method="get" class="form-horizontal" role="form" id="form1">
                    <input type="hidden" name="c" value="site" />
                    <input type="hidden" name="a" value="entry" />
                    <input type="hidden" name="m" value="sz_yi" />
                    <input type="hidden" name="method" value="flowstatistics" />
                    <input type="hidden" name="p" value="live" id="form_p" />
                    <input type="hidden" name="do" value="plugin" id="form_do" />
                    
                    <div class='input-group'>
                        <div class='input-group-addon'>
                            <label class='radio-inline' style='margin-top:-7px;'>
                                <input type='radio' value='0' name='searchtime' {if $_GPC['searchtime']=='0'}checked{/if}>全部
                            </label>
                            <label class='radio-inline'  style='margin-top:-7px;'>
                                <input type='radio' value='1' name='searchtime' {if $_GPC['searchtime']=='1'}checked{/if}>按时间
                            </label>
                        </div>
                        {php echo tpl_form_field_daterange('time', array('starttime'=>$_GPC['time']['start'],'endtime'=>$_GPC['time']['end']),true);}
                    </div>
                    <div class="input-group">
                        <label class="col-xs-12 col-sm-2 col-md-2 col-lg-2 control-label"></label>
                        <div class="col-sm-7 col-lg-9 col-xs-12">
                            <button class="btn btn-default"><i class="fa fa-search"></i> 搜索</button>
                            <input type="hidden" name="token" value="{$_W['token']}" />
                        </div>
                    </div>
                </form>
            </div>
        </div>
        {if $data}
            <div class="widget-mod">
                <div id="container" style="min-width: 300px; height: 300px; margin: 0 auto"></div>  
            </div>
            <div style="margin-left:6%;font-size:16px ;">
                <p style="margin: 15px 0;border-left: 3px solid hsl(24, 100%, 50%) !important;padding: 15px;background: hsla(24, 100%, 50%, 0.2);display:inline-block;margin-right:6%;width:44%;">
                推流：
                <span style="color:hsl(24, 100%, 50%)"> {$up_log}</span>
                </p>
                <p style="margin: 15px 0;border-left: 3px solid hsl(24, 100%, 50%) !important;padding: 15px;background: hsla(24, 100%, 50%, 0.2);display:inline-block;width:43%;">

                拉流：<span style="color:hsl(24, 100%, 50%)"> {$down_log}</span></p>
            </div>  
        {else}
            <div style="margin-left:6%;font-size:16px ;">
                没有流量数据!
            </div>
        {/if}
    </div>

</div>
<script language="javascript" src="{SZ_YI_STATIC}js/dist/highcharts/highcharts.js"></script>
<script type="text/javascript">
$(function () {
    $('#container').highcharts({
        chart: {
            renderTo:'container',
            type:'column' //显示类型 柱形
        },
        title: {
            text: '流量统计',
            x: 0 //center
        },
        exporting:{
            enabled:false
        },
        credits: {
            enabled: false
        },
        subtitle: {
            text: '',
            x: -20
        },
        xAxis: {
            categories: ['推流=主播端使用流量', '拉流=观看者使用流量' ]
        },
        yAxis: {
            
            title: {
                text: '流量'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }],
        },

        legend: {
            layout: 'horizontal',
            align: 'center',
            verticalAlign: 'top',
            borderWidth: 0,
            y:20
        },
        tooltip: {
            shared: true,  
            useHTML: true  
        },
        plotOptions: {  
            column: {  
                pointPadding: 0.2,  
                borderWidth: 0  
            }  
        }, 
        series: [
            {
                name: '流量',
                colorByPoint: true,
                data: [{$data['up_log']},{$data['down_log']}]
            }
        ]
    });
});</script>
{template 'web/_footer'}

